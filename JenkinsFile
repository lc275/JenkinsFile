你的 more-tools 可能默认就带有 display: none;，但是 classList.toggle("hidden") 只是切换类名，可能没有正确影响 display 属性。
你可以 直接切换 style.display，或者修正 CSS，确保 .hidden 类能正常生效。


---

1. 修正 CSS

.hidden {
    display: none !important; /* 确保隐藏生效 */
}


---

2. 修改 JavaScript

直接切换 style.display，保证展开和收回都有效：

async function loadNavbar() {
    // 读取工具列表
    const response = await fetch("tools.js");
    const tools = await response.json();

    const mainToolsContainer = document.getElementById("main-tools");
    const moreToolsContainer = document.getElementById("more-tools");
    const moreBtn = document.getElementById("more-btn");

    // 显示前 5 个工具
    tools.slice(0, 5).forEach(tool => {
        const li = document.createElement("li");
        li.innerHTML = `<a href="${tool.url}">${tool.name}</a>`;
        mainToolsContainer.appendChild(li);
    });

    // 剩余的工具放入 "更多"
    tools.slice(5).forEach(tool => {
        const li = document.createElement("li");
        li.innerHTML = `<a href="${tool.url}">${tool.name}</a>`;
        moreToolsContainer.appendChild(li);
    });

    // 初始隐藏菜单
    moreToolsContainer.style.display = "none";

    // 绑定点击事件
    moreBtn.addEventListener("click", (event) => {
        event.stopPropagation(); // 阻止点击冒泡
        if (moreToolsContainer.style.display === "none") {
            moreToolsContainer.style.display = "block";
        } else {
            moreToolsContainer.style.display = "none";
        }
    });

    // 点击页面其他地方时，自动收起
    document.addEventListener("click", (event) => {
        if (!moreDropdown.contains(event.target)) {
            moreToolsContainer.style.display = "none";
        }
    });
}

// 自动加载导航栏
document.addEventListener("DOMContentLoaded", async () => {
    const navContainer = document.createElement("div");
    document.body.insertBefore(navContainer, document.body.firstChild);
    
    // 加载导航栏 HTML
    const response = await fetch("nav.html");
    navContainer.innerHTML = await response.text();
    
    // 加载导航栏工具
    loadNavbar();
});


---

3. 修正点

1. style.display = "none" 作为初始状态，确保默认隐藏。


2. 点击 "更多" 按钮时切换 display: block 和 display: none，确保展开/收回正常工作。


3. 阻止 click 事件冒泡，否则 document.addEventListener("click") 可能立即关闭菜单。


4. 修正 document.addEventListener("click") 的判断条件，确保点击 "更多" 按钮或菜单时不会误关闭。




---

这样应该能解决你的问题，试试看！

